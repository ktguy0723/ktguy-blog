(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21d0f2"],{d04d:function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement;s._self._c;return s._m(0)},r=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("section",[e("h1",[s._v("JavaScript Introduction Tutorial - Unit Test, Integration Tests & e2e Tests")]),e("h3",[s._v("参考記事")]),e("ul",[e("li",[e("a",{attrs:{href:"https://www.youtube.com/watch?v=r9HdJ8P6GQI"}},[s._v("youtube")])]),e("li",[e("a",{attrs:{href:"https://jestjs.io/ja/"}},[s._v("Jest公式")])])]),e("h2",[s._v("0. Overview")]),e("h3",[s._v("0-1. テストの種類")]),e("ul",[e("li",[s._v("Unit Tests（単体テスト） : Fully Isolated （テスト難易度は優しい、テスト量は多量）")]),e("li",[s._v("Integration Tests（組合わせテスト） : With Dependencies")]),e("li",[s._v("End-to-End (E2E) Tests（総合テスト） : Full Flow (テスト難易度は高い、テスト量は少量)")])]),e("h3",[s._v("0-2. JavaScriptテストツール")]),e("ul",[e("li",[s._v("Jest "),e("ul",[e("li",[s._v("Test Runner (Mocha)")]),e("li",[s._v("Assertion Library (Chai)")])])]),e("li",[s._v("Headless Browser (Puppeteer)")])]),e("h2",[s._v("1. Unit Test (単体テスト)")]),e("h3",[s._v("1-1. Jest のインストール")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("$ npm install --save-dev jest\n")])]),e("h3",[s._v("1-2. util.test.js (Unit Tests)を作成")]),e("p",[e("strong",[s._v("Jest")]),s._v(" は"),e("code",{pre:!0},[s._v(".test.js")]),s._v("ファイルを自動で読みとりテストする。"),e("br"),s._v(" 関数は引数(input)および戻り値(output)があるとUnit Testsがしやすく望ましい？")]),e("p",[s._v("util.test.js")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// テスト対象関数を取得")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" { generatieText } = "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./util'")]),s._v(")\n\n"),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 第一引数にテストの説明、第二引数はテスト")]),s._v("\ntest("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'should output name and age'")]),s._v(", () => {\n  \n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" text = generateText("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Max'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("29")]),s._v(");  \n  \n  "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// expect(テストのinput内容).toBe(outputで期待されるもの)")]),s._v("\n  expect(text).toBe("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Max (29 years old)'")]),s._v(");\n});\n")])]),e("p",[s._v("util.js (テスト対象プログラム抜粋)")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("exports.generateText = "),e("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),e("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("name, age")]),s._v(") =>")]),s._v(" {\n  "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Returns output text")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`"),e("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${name}")]),s._v(" ("),e("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${age}")]),s._v(" years old)`")]),s._v(";\n};\n")])]),e("p",[e("strong",[s._v("point")])]),e("ul",[e("li",[s._v("1つの"),e("code",{pre:!0},[s._v("test()")]),s._v("に対して複数の"),e("code",{pre:!0},[s._v("expect().toBe()")]),s._v("が書くことで、テスト精度が上がる")]),e("li",[s._v("単体テストは同じ関数に対して複数の"),e("code",{pre:!0},[s._v("test()")]),s._v("を書くことで、テスト精度が上がる")])]),e("h3",[s._v("1-3. package.json を修正")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("{\n  "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"scripts"')]),s._v(": {\n    "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"test"')]),s._v(": "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"jest --watch"')]),s._v("  "),e("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// --watch をつけると常時起動")]),s._v("\n  }\n}\n")])]),e("h3",[s._v("1-4. テストの実行")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("$ npm run "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("test")]),s._v("\n")])]),e("h2",[s._v("2. Integration Tests (組み合わせテスト)")]),e("p",[e("strong",[s._v("Jest")]),s._v(" でテストを行う点では単体テストと同じだが、組み合わせテストは、複数の関数の組み合わせのテストを行う。")]),e("p",[s._v("組み合わせテストも、Input, Outputを明確にすることで、テストを行いやすくする。")]),e("p",[e("strong",[s._v("point")]),e("code",{pre:!0},[s._v("exports.validateInput = ...")]),s._v("のように記載したままだと、同じファイルから参照できない。対策は下記。")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" validateInput = ...\n\nexports.validateInput = validateInput\n")])]),e("h2",[s._v("3. E2E Tests (総合テスト)")]),e("h3",[s._v("3-1. puppeteer install")]),e("p",[s._v("chrome用テストツールpuppeteerのインストール")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("$ npm install --save-dev puppeteer\n")])]),e("h3",[s._v("3-2. テストの記述")]),e("p",[s._v("※ WSLだと起動できないのでWindowsで実行した utils.test.js")]),e("pre",{pre:!0},[e("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" puppeteer = "),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'puppeteer'")]),s._v(");\n\ntest("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'should create an element with text and correct class'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("async")]),s._v(" () => {\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" browser = "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" puppeteer.launch({\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("headless")]),s._v(": "),e("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("slowMo")]),s._v(": "),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("80")]),s._v(",\n    "),e("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("args")]),s._v(": ["),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'--window-size=1920,1080'")]),s._v("]\n  });\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" page = "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" browser.newPage();\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" page.goto(\n    "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'file:///C:/Users/ktguy/workspace/test/js-testing-introduction/index.html'")]),s._v("\n  );\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" page.click("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'input#name'")]),s._v(");\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" page.type("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'input#name'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Anna'")]),s._v(");\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" page.click("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'input#age'")]),s._v(");\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" page.type("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'input#age'")]),s._v(", "),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'28'")]),s._v(");\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" page.click("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'#btnAddUser'")]),s._v(");\n  "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" finalText = "),e("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("await")]),s._v(" page.$"),e("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("eval")]),s._v("("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.user-item'")]),s._v(", el => el.textContent);\n  expect(finalText).toBe("),e("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Anna (28 years old)'")]),s._v(");\n}, "),e("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10000")]),s._v(");\n")])])])}],n=e("2877"),p={},l=Object(n["a"])(p,a,r,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d21d0f2.46e2c9ee.js.map